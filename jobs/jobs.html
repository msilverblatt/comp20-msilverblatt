
<!DOCTYPE html>

<html>

<head>
<title>Friends of Ming Chow Jobs Listing</title>
<link rel="stylesheet" href="jobs.css"/>
<script>
	function parse() {
		

var request;

try {
  request = new XMLHttpRequest();
}
catch (ms1) { // yes, exception handling is supported in JavaScript
  try {
    request = new ActiveXObject("Msxml2.XMLHTTP");
  }
  catch (ms2) {
    try {
      request = new ActiveXObject("Microsoft.XMLHTTP");
    }
    catch (ex) {
      request = null;
    }
  }
}
if (request == null) {
  alert("Error creating request object --Ajax not supported?");
}
request.open("GET","http://messagehub.herokuapp.com/lab8.json",true);


		    data = JSON.parse(request);
		    div = document.getElementById("list");
		    list = document.createElement("ul");
		    div.insertBefore(list,div.childNodes[0]);
		    table = document.createElement("table");
		    
		    header = document.createElement("tr");
		    node = document.createElement("th");
		    text = document.createTextNode("Company");
		    node.appendChild(text);
		    header.appendChild(node);
		   	node = document.createElement("th");
		    text = document.createTextNode("Location");
		    node.appendChild(text);
		    header.appendChild(node);
		    node = document.createElement("th");
		    text = document.createTextNode("Position");
		    node.appendChild(text);
		    header.appendChild(node);
		    table.appendChild(header);
		    



		    for (var i = 0, len = data.length; i < len; i++){
		    	alert("hello");
		    	row = document.createElement("tr");
		    	
		    	
		    	//row.setAttributeNode(m);

		    	node = document.createElement("td");
		    	a = document.createElement("a");

		    	cl = document.createAttribute("class");
		    	cl.value = "company";
		    	node.setAttributeNode(cl);
		    	text = document.createTextNode(data[i].company);
		    	
		    	//row.appendChild(node);
		    	
		    	m = document.createAttribute("onMouseover");
		    	m.value="alert('hello'); document.getElementById('Tufts University').style.display = 'table-cell'; ";
		    	n = document.createAttribute("onMouseout");
		    	n.value="document.getElementById('Apple, Inc.').style.display = 'none'";
		    	cl = document.createAttribute("id");
		    	cl.value = i.toString();
		    	a.setAttributeNode(cl);
		    	a.setAttributeNode(m);
		    	a.setAttributeNode(n);

		    	a.appendChild(text);
		    	node.appendChild(a);
		    	row.appendChild(node);

		   		node = document.createElement("td");
		   		cl = document.createAttribute("class");
		    	cl.value = "location";
		    	node.setAttributeNode(cl);
		    	text = document.createTextNode(data[i].location);
		    	node.appendChild(text);
		    	row.appendChild(node);
		    	

		    	node = document.createElement("td");
		    	cl = document.createAttribute("class");
		    	cl.value = "position";
		    	node.setAttributeNode(cl);
		    	text = document.createTextNode(data[i].position);
		    	node.appendChild(text);
		    	row.appendChild(node);
		    	
		    	node = document.createElement("td");
		    	cl = document.createAttribute("id");
		    	cl.value = data[i].company;
		    	node.setAttributeNode(cl);
		    	text= document.createTextNode(data[i].description);
		    	node.appendChild(text);
		    	row.appendChild(node);
		    	
		    	table.appendChild(row);

//		    	var item = document.createElement("li");
//		    	textNode = document.createTextNode(data[i].company+" "+data[i].location+" "+data[i].position);
//		    	item.appendChild(textNode);
		    //	div.appendChild(item);
		    //	console.log(data[i].company);
		    //	console.log(data[i].location);
		    }
		    div.appendChild(table);
//		    console.log(data[0].company);
    
    }
</script>
</head>

<body onload="parse();">
<div id="list"></div>
</body>

</html>
